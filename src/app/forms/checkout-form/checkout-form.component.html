<div class="column" id="checkoutFormGroup">
  <div class="column" id = "saField">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item active" aria-current="page">
          <span> Shipping Address</span></li>
      </ol>
    </nav>
    <div class="column" [ngSwitch]="this.currentStatus" id="saForm">
      <div *ngSwitchCase="Status.loggedWithoutAddress">
        <form [formGroup]="saFormGroup">
          <div formGroupName="customer">
            <mat-form-field>
              <label>
                <input matInput placeholder="First name" formControlName="firstName" required>
              </label>
            </mat-form-field>
            <mat-form-field>
              <label>
                <input matInput placeholder="Last name" formControlName="lastName" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="phone number" formControlName="phoneNumber" required>
              </label>
            </mat-form-field>
            <br>
          </div>
          <div formGroupName="address">
            <mat-form-field>
              <label>
                <input matInput placeholder="street 1" formControlName="street1"
                       required>
                <small *ngIf="searching" class="form-text text-muted">searching...</small>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="street 2" formControlName="street2">
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="city" formControlName="city" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="province" formControlName="province" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="postal code" formControlName="postalCode" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="country" formControlName="country" required>
              </label>
            </mat-form-field>
          </div>
        </form>
        <div class="proceed">
          <button  mat-button (click)="onSubmitSaFormGroup()">Proceed to
            Billing
          </button>
        </div>
      </div>
      <div *ngSwitchCase="Status.notLogged">
        <form [formGroup]="saFormGroup">
          <div formGroupName="customer">
            <mat-form-field>
              <label>
                <input matInput placeholder="First name" formControlName="firstName" required>
              </label>
            </mat-form-field>
            <mat-form-field>
              <label>
                <input matInput placeholder="Last name" formControlName="lastName" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="phone number" formControlName="phoneNumber" required>
              </label>
            </mat-form-field>
            <br>
          </div>
          <div formGroupName="address">
            <mat-form-field>
              <label>
                <input matInput placeholder="street 1" formControlName="street1"
                       required>
                <small *ngIf="searching" class="form-text text-muted">searching...</small>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="street 2" formControlName="street2">
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="city" formControlName="city" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="province" formControlName="province" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="postal code" formControlName="postalCode" required>
              </label>
            </mat-form-field>
            <br>
            <mat-form-field>
              <label>
                <input matInput placeholder="country" formControlName="country" required>
              </label>
            </mat-form-field>
          </div>
          <div>
            <button class="proceed" mat-button (click)="onSubmitSaFormGroup()">Proceed to
              Billing
            </button>
          </div>
        </form>
      </div>
      <div *ngSwitchCase="Status.loggedWithAddress">
        <div>
          <mat-radio-group
            class="example-radio-group" [(ngModel)]="this.addressSelected">
            <mat-radio-button class="example-radio-button" [value]="address"
                              *ngFor="let address of addressList" (click)="clickOnExistShippingAddress(address)"
            >
              <p>{{address.customer.firstName + ' ' + address.customer.lastName}}</p>
              <p>{{address.customer.phoneNumber}}</p>
              <p>{{address.address.street1}}</p>
              <p>{{address.address.street2}}</p>
              <p>{{address.address.city + ', ' + address.address.province + ', ' + address.address.country}}</p>
              <p>{{address.address.postalCode}}</p>
            </mat-radio-button>
          </mat-radio-group>

        </div>
        <button type="button" *ngIf="!this.isAddingAddress" mat-stroked-button id="add" data-toggle="collapse"
                data-target="#newAddressForm" aria-expanded="true"
                aria-controls="collapseExample" color="primary"
                (click)="triggerAddressForm()">Add a new address
        </button>
        <div id="newAddressForm" class="collapse">
          <form [formGroup]="saFormGroup">

            <div formGroupName="customer">
              <mat-form-field>
                <label>
                  <input matInput placeholder="First name" formControlName="firstName" required>
                </label>
              </mat-form-field>
              <mat-form-field>
                <label>
                  <input matInput placeholder="Last name" formControlName="lastName" required>
                </label>
              </mat-form-field>
              <br>
              <mat-form-field>
                <label>
                  <input matInput placeholder="phone number" formControlName="phoneNumber" required>
                </label>
              </mat-form-field>
              <br>
            </div>
            <div formGroupName="address">
              <mat-form-field>
                <label>
                  <input matInput placeholder="street 1" formControlName="street1"
                         required>
                  <small *ngIf="searching" class="form-text text-muted">searching...</small>
                </label>
              </mat-form-field>
              <br>
              <mat-form-field>
                <label>
                  <input matInput placeholder="street 2" formControlName="street2">
                </label>
              </mat-form-field>
              <br>
              <mat-form-field>
                <label>
                  <input matInput placeholder="city" formControlName="city" required>
                </label>
              </mat-form-field>
              <br>
              <mat-form-field>
                <label>
                  <input matInput placeholder="province" formControlName="province" required>
                </label>
              </mat-form-field>
              <br>
              <mat-form-field>
                <label>
                  <input matInput placeholder="postal code" formControlName="postalCode" required>
                </label>
              </mat-form-field>
              <br>
              <mat-form-field>
                <label>
                  <input matInput placeholder="country" formControlName="country" required>
                </label>
              </mat-form-field>
            </div>
            <button type="reset" mat-stroked-button color="warn" data-toggle="collapse" data-target="#newAddressForm"
                    (click)="this.saFormGroup.reset(); this.triggerAddressForm()">Cancel
            </button>
            <button mat-stroked-button color="primary" data-toggle="collapse" data-target="#newAddressForm"
                    (click)="this.addAddressToDB()" [disabled]="!this.saFormGroup.valid">Save
            </button>
          </form>
        </div>
      </div>
      <div *ngSwitchDefault>
        <div class="spinner-grow text-dark" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>

    </div>
    <div >
      <button class="proceed" type="button"  mat-button
              (click)="onSubmitSaFormGroup()"
              [disabled]="this.addressSelected===null || !this.saFormGroup.valid || this.isAddingAddress">
        PROCEED TO BILLING
      </button>
    </div>
  </div>

  <div class="column" id = "baField">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item active" aria-current="page">Billing Address</li>
      </ol>
    </nav>
    <mat-checkbox class="example-margin" [(ngModel)]="sameAddress" (click)="changeBAform()">My billing address is the
      same as my shipping
      address
    </mat-checkbox>
    <form *ngIf="!sameAddress" [formGroup]="baFormGroup">
      <div formGroupName="customer">
        <mat-form-field>
          <label>
            <input matInput placeholder="First name" formControlName="firstName" required>
          </label>
        </mat-form-field>
        <mat-form-field>
          <label>
            <input matInput placeholder="Last name" formControlName="lastName" required>
          </label>
        </mat-form-field>
        <br>
        <mat-form-field>
          <label>
            <input matInput placeholder="phone number" formControlName="phoneNumber" required>
          </label>
        </mat-form-field>
        <br>
      </div>
      <div formGroupName="address">
        <mat-form-field>
          <label>
            <input matInput placeholder="street 1" formControlName="street1" required>
          </label>
        </mat-form-field>
        <br>
        <mat-form-field>
          <label>
            <input matInput placeholder="street 2" formControlName="street2">
          </label>
        </mat-form-field>
        <br>
        <mat-form-field>
          <label>
            <input matInput placeholder="city" formControlName="city" required>
          </label>
        </mat-form-field>
        <br>
        <mat-form-field>
          <label>
            <input matInput placeholder="province" formControlName="province" required>
          </label>
        </mat-form-field>
        <br>
        <mat-form-field>
          <label>
            <input matInput placeholder="postal code" formControlName="postalCode" required>
          </label>
        </mat-form-field>
        <br>
        <mat-form-field>
          <label>
            <input matInput placeholder="country" formControlName="country" required>
          </label>
        </mat-form-field>
      </div>
      <div>
        <button mat-button>Back</button>
        <button mat-button>Next</button>
      </div>
    </form>
    <button class="proceed" mat-button>Proceed to Payment</button>
  </div>
  <div class="column" id = "coField">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item active" aria-current="page">Payment</li>
      </ol>
    </nav>
    <form [formGroup]="ccFormGroup" id="payment-form">
      <mat-form-field>

        <label>
          <input matInput placeholder="First name" formControlName="firstName" required>
        </label>
      </mat-form-field>
      <mat-form-field>
        <label>
          <input matInput placeholder="Last name" formControlName="lastName" required>
        </label>
      </mat-form-field>
      <br>
      <mat-form-field>
        <label>
          <input matInput placeholder="Card Number" formControlName="cardNumber" required>
        </label>
      </mat-form-field>
      <br>
      <mat-form-field>
        <label>
          <input matInput placeholder="Expire Date" formControlName="expireDate" required>
        </label>
      </mat-form-field>
      <mat-form-field>
        <label>
          <input matInput placeholder="CVV" formControlName="cvv" required>
        </label>
      </mat-form-field>
    </form>
  </div>
</div>
